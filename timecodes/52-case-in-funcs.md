00:17 стартавая точка для перехода к solution-2
00:30 плант как будем делать переход от solution-1 к solution-2. зачем тесты.
01:54 виды тестов которые нужно реализовать
02:48 почему всё таки стоит писать и юнит тесты тоже
03:24 изучаем сгенерированные тесты в нашем проекте
05:23 test_data.exs и обновление bookshop_test.exs
06:02 тесты на Controller (на 5 функций валидации)
06:23 про test_data.ex и остальные тесты с exs
06:44 как создать тестовый модуль для тестируемого модуля
09:50 запуск первого теста для контроллера
10:31 пишем тесты на все остальные ф-и валидации
12:24 убираем рандомизацию, чтобы тесты всегда проходили
16:50 о том как добавить test_data.ex в пути для тестов (elixirc_paths)
17:56 следующий этап - интеграционные тесты для solution-1
18:38 один solution_test на все solution-1, solution-N
19:05 пишем тест для базового сценария (happy path)
19:52 заполнение Order для assert-a и про книги мимоходом
22:04 упоминание книги "кабана" про распределённые системы
22:50 о порядке книг в тесте, проблемы матчинга элементов в списке
24:52 пишем остальные интеграционные тесты
25:58 смотрим на весь получившийся набор тестов: юнит и интеграционные
26:05 можно начинать рефакторить - создаём solution2.ex
26:46 наконец-то! подошли к сути solution-2 которое хотим сделать
31:20 думаем как дальше уменьшаем вложенность
31:40 выход на state - для передачи промежуточных значений в Order.create
34:50 выносим код в handle_address
35:44 магия выравнивания скопированного кода
36:50 выносим handle_cat
37:48 смотрим на получившийся код, обсуждаем как это работает
39:16 почему это решение не идеально, выход на паттерн и как улучшить код
